<!DOCTYPE html>
<html lang="en">

<head>
	<title>3D Shoebox Model</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<script src="https://cdn.jsdelivr.net/npm/tweakpane@1.5.6/dist/tweakpane.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.11.0/underscore-min.js"></script>
	<script src="//d3js.org/d3.v3.min.js"></script>
	<link type="text/css" rel="stylesheet" href="main.css">

	<style>

body {
   margin:0;
   padding:0;
   height:100%;
}
		#footer{
			border-top: solid;
			/* overflow: scroll; */
	
  background-color: rgba(255,255,255,0.8);
  /* color:white; */
   position:fixed;
   bottom:0;
   width:100%;
   height:500px;   /* Height of the footer */
    -webkit-transition: height 1s, visibility 1s;
		transition: height 1s, visibility 1s;
		z-index: 50;
}
#footerbuttondown{
	/* background-color: black; */
	color:red;
  font-size: 35px;
  width:35px;
  margin-left:auto;
  margin-right:auto;
  text-align: center;
	position: relative;
  top:-40px;
  border-radius:5px;
	border-radius:5px;
	z-index: 150
}
#footerbuttonup{
	/* background-color: black; */
	color:red;
  font-size: 35px;
  width:35px;
  margin-left:auto;
  margin-right:auto;
  text-align: center;
	position: relative;
  top:-60px;
  border-radius:5px;
  border-radius:5px;
	visibility:hidden;
	z-index: 50
}
#footercont{
  position:absolute;
  top:0px;
  opacity:1;
	transition: opacity 1s, visibility 2s, display 2s;
	z-index: 50
}
#centerbutton{
	align:center;
  width:100%;
	content-align: center;
	z-index: 50;
}

@import url(https://fonts.googleapis.com/css?family=Open+Sans);

* { box-sizing: border-box; }

body { 
  font-family: 'Open Sans', sans-serif;
  color: #666;
}

/* STRUCTURE */

.wrapper {
	padding: 5px;
	/* max-width: 960px; */
	width: 95%;
	margin: 20px auto;
}
header {
	padding: 0 15px;
}

.columns {
	display: flex;
	flex-flow: row wrap;
	justify-content: center;
	margin: 5px 0;
	
}

.column {
	flex: 1;
	border: 1px solid gray;
	margin: 5px;
	padding: 10px;
	max-height: 360px;
	overflow: scroll;

	
}


@media screen and (max-width: 680px) {
	.columns .column {
		flex-basis: 100%;
		margin: 0 0 5px 0;
	}
}

input[type=number]::-webkit-inner-spin-button, 
input[type=number]::-webkit-outer-spin-button {  

	 -webkit-appearance: "Always Show Up/Down Arrows";
	 opacity: 1;

}

input[type=number]{
	float: right; width:20%; text-align: center; margin-right: 20px;
}
label{
	padding-left: 20px;
	font-weight: 600;
	/* font-size: 1.2em; */
}


	</style>

	<script type="text/javascript" charset="utf-8" src="./ladybug.js"></script>
	<script type="text/javascript" charset="utf-8" src="./mrt.js"></script>
	<script type="text/javascript" charset="utf-8" src="./erf.js"></script>

	<script type="text/javascript" charset="utf-8" src="./params.js"></script>
	<script type="text/javascript" charset="utf-8" src="./geo.js"></script>
	<script type="text/javascript" charset="utf-8" src="./PPDCalc.js"></script>
	<script type="text/javascript" charset="utf-8" src="./UValCalc.js"></script>
	<script type="text/javascript" charset="utf-8" src="./util.js"></script>
	<script type="text/javascript" charset="utf-8" src="./units.js"></script>
	<script type="text/javascript" charset="utf-8" src="./misc.js"></script>

</head>

<body>

	<div id="info">
		<span id="mdata">
			<!-- <a href="https://threejs.org" target="_blank" rel="noopener">three.js</a> shoebox -->
		</span>
		
		<div style="float: right;">
			<div id="visualization"></div>
			<div class="tweakpane" id="global_pane" style="width: 330px;">
			</div>
			<div class="tweakpane" id="climate_pane" style="width: 330px;">
			</div>
			<div class="tweakpane" id="time_pane" style="width: 330px;">
			</div>
			<div class="tweakpane" id="room_pane" style="width: 330px;">
			</div>
			<div class="tweakpane" id="mrt_pane" style="width: 330px;">
			</div>
		</div>
	</div>

	<script>
		//D3 COLOR CHART

		let timeStepValue = 4;
		let ppdValue1 = 4;

		d3.select("#visualization").append('svg').attr("height", 40).attr("width", 327)
		var vis = d3.select("svg")
		var arr = d3.range(13 * timeStepValue)
		var ColorScaleArray = [];
		var dataset = [0, 2, 4, 6, 8, 10, 12];

		//position scale
		var xScale = d3.scale.linear().domain([0, 13]).range([0, 325])

		//The mystical polylinear color scale
		// var colorScale = d3.scale.linear().domain([0, 2, 3, 5, 12])
		//     .range([d3.rgb(255,255,255), d3.rgb(255,222,60), d3.rgb(218,93,127), d3.rgb(220,26,85), d3.rgb(220,26,85)])
		var colorScale = d3.scale.linear().domain([0, 6, 13])
			.range(["#ffffff", "#e2706a", "#893132"])

		vis.selectAll('rect').data(arr).enter()
			.append('rect')
			.attr({
				x: function (d) {
					return xScale(d) + 1
				},
				y: 16,
				height: 12,
				width: 25,
				stroke: d3.rgb(0, 0, 0),
				fill: function (d) {
					ColorScaleArray.push(d3.rgb(colorScale(d)));
					return colorScale(d)
				}
			});


		vis.selectAll("text") // <-- Note "text", not "circle" or "rect"
			.data(dataset)
			.enter()
			.append("text") // <-- Same here!
			.text(function (d) {
				return d;
			})
			.attr("text-anchor", "middle")
			.attr("font-family", "sans-serif")
			.attr("font-size", "9px")
			.attr({
				x: function (d) {
					return xScale(d) + 12
				},
				y: 40
			});

		vis.append("text")
			.attr("x", 0)
			.attr("y", 12)
			.text("Heatmap Legend")
			.attr("font-family", "sans-serif")
			.attr("font-size", "12px")
	</script>
	<script src="./viewer.js" type="module"></script>
	<script src = "./script.js"></script>
	<script src = "./solarCalculator.js"></script>

	

	<!-- Click the triangle to toggle the footer :) -->
<div id="footer"> 

  <div id="footerbuttondown">&#9660;</div>
  <div id="footerbuttonup">&#9650;</div>

  
  <div id="footercont">
	 
		<div class="wrapper">

			<header>
				<h1>Solar Comfort Tool</h1>
				<div id="visualization"></div>
			</header>
				
		<section class="columns">
			
			<div class="column">
				<h2>Geometry</h2>
				<h3>Room</h3>
				<p>Enter the overall dimensions of the room. Make sure to select the correct units before proceeding. By default the windows face due South. Rotate the room orientation to adjust</p>
				<label for="quantity">Orientation:</label>
	<input type="number" id="quantity" name="quantity" value="0" min="-360" max="360"><br>
	<label for="quantity">Width (of window wall):</label>
	<input type="number" id="quantity" name="quantity" value="2" min="1" max="5"><br>
				<label for="quantity">Depth (from windows):</label>
	<input type="number" id="quantity" name="quantity" value="2" min="1" max="5"><br>
	
	<label for="quantity">Ceiling Height:</label>
	<input type="number" id="quantity" name="quantity" value="2" min="1" max="5"><br>
	<label for="quantity">Grid Height:</label>
	<input type="number" id="quantity" name="quantity" value="2" min="1" max="5"><br>
	<hr>
	<h3>Windows</h3>
	<label for="heightFromSill">Height From Sill:</label>
	<input type="number" id="heightFromSill" name="heightFromSill" value="2" min="1" max="5"><br>
	<label for="sillHeight">Sill Height:</label>
	<input type="number" id="sillHeight" name="sillHeight" value="2" min="1" max="5"><br>
	<label for="glazingRatio">Glazing Ratio:</label>
	<input type="number" id="glazingRatio" name="glazingRatio" value="2" min="1" max="5"><br>
	<label for="windowWidth">Width:</label>
	<input type="number" id="windowWidth" name="windowWidth" value="2" min="1" max="5"><br>
	<label for="seperation">Seperation:</label>
	<input type="number" id="seperation" name="seperation" value="2" min="1" max="5"><br>	

	<hr>
	<h3>Horizontal Louvers</h3>
	<label for="heightFromSill">Depth:</label>
	<input type="number" id="heightFromSill" name="heightFromSill" value="1" min="1" max="5"><br>
	<label for="sillHeight">Number:</label>
	<input type="number" id="sillHeight" name="sillHeight" value="0" min="0" max="5"><br>
	<label for="glazingRatio">Spacing:</label>
	<input type="number" id="glazingRatio" name="glazingRatio" value="3" min="1" max="10"><br>
	<label for="windowWidth">Distance from Facade:</label>
	<input type="number" id="windowWidth" name="windowWidth" value="0" min="0" max="5"><br>
	<label for="seperation">Height Above:</label>
	<input type="number" id="seperation" name="seperation" value="0" min="-5" max="5"><br>	
	<label for="seperation">Angle:</label>
	<input type="number" id="seperation" name="seperation" value="90" min="0" max="90"><br>	

	<hr>
	<h3>Vertical Louvers</h3>
	<label for="heightFromSill">Depth:</label>
	<input type="number" id="heightFromSill" name="heightFromSill" value="2" min="1" max="5"><br>
	<label for="sillHeight">Number:</label>
	<input type="number" id="sillHeight" name="sillHeight" value="2" min="1" max="5"><br>
	<label for="glazingRatio">Spacing:</label>
	<input type="number" id="glazingRatio" name="glazingRatio" value="2" min="1" max="5"><br>
	<label for="windowWidth">Start (Left/Right):</label>
	<input type="number" id="windowWidth" name="windowWidth" value="2" min="1" max="5"><br>
	<label for="seperation">Distance from Facade:</label>
	<input type="number" id="seperation" name="seperation" value="2" min="1" max="5"><br>	
	<label for="windowWidth">Full Height?:</label>
	<input type="number" id="windowWidth" name="windowWidth" value="0" min="0" max="5"><br>
	<label for="seperation">Height Above:</label>
	<input type="number" id="seperation" name="seperation" value="0" min="-5" max="5"><br>	
	<label for="seperation">Relative Height</label>
	<input type="number" id="seperation" name="seperation" value="90" min="0" max="90"><br>	
</div>
			
			<div class="column">
				<h2>Climate</h2>
				<h3>Location</h3>
				<p>Enter the location of the study. If you do not know the lat, long, and timezone, click the button below</p>
			
				<label for="latitude">Latitude:</label>
	<input type="number" id="latitude" name="latitude" value="-71" min="-180" max="180"><br>
				<label for="quantity">Longitude:</label>
	<input type="number" id="quantity" name="quantity" value="42" min="-180" max="180"><br>
	<label for="quantity">Timezone Offset:</label>
	<input type="number" id="quantity" name="quantity" value="-5" min="-14" max="14"><br>
	<button style="width: 90%; margin-left:5%; height: 30px; margin-top: 5px; border-radius: 0px; border: none" >Chose Location from City Lookup</button><br>
			
	<hr>
	<h3>Time</h3>
				<label for="latitude">Hour:</label>
	<input type="number" id="latitude" name="latitude" value="12" min="1" max="24"><br>
				<label for="quantity">Day:</label>
	<input type="number" id="quantity" name="quantity" value="21" min="1" max="31"><br>
	<label for="quantity">Month:</label>
	<input type="number" id="quantity" name="quantity" value="9" min="1" max="12"><br>
	<label for="quantity">Time Step:</label>
	<input type="number" id="quantity" name="quantity" value="4" min="1" max="8"><br>
	<hr>

	<h3>Temperature</h3>
				<label for="latitude">Outdoor Temp:</label>
	<input type="number" id="latitude" name="latitude" value="12" min="1" max="24"><br>
				<label for="quantity">Air Temp:</label>
	<input type="number" id="quantity" name="quantity" value="21" min="1" max="31"><br>
	<label for="quantity">Wind Speed:</label>
	<input type="number" id="quantity" name="quantity" value="9" min="1" max="12"><br>
	<label for="quantity">Humidity:</label>
	<input type="number" id="quantity" name="quantity" value="4" min="1" max="8"><br>
	<hr>
				</div>
			
			<div class="column">
				<h2>Parameters</h2>
				<p>Illo quod nemo ratione itaque dolores laudantium error vero laborum blanditiis nostrum. Lorem ipsum dolor sit amet consectetur adipisicing elit. Sequi ratione architecto cum praesentium voluptatibus recusandae?</p>
			</div>
			
		</section>	
			
		
		
		</div>



  </div>
</div><!--end of footer-->

<script>
	document.getElementById("footerbuttondown").onclick = function(){shrink()};
document.getElementById("footerbuttonup").onclick = function(){ expand()};
document.getElementById("footer").style.height= "500px"; 

function shrink(){
if(document.getElementById("footer").style.height= "500px"){

	document.getElementById("footer").style.height= "30px";
	document.getElementById("footerbuttondown").style.visibility="hidden";  
 document.getElementById("footerbuttonup").style.visibility="visible";  
	document.getElementById("footercont").style.opacity="0";  
	document.getElementById("footercont").style.visibility="hidden";
																		
}
}

function expand(){
if(document.getElementById("footer").style.height= "30px"){
	
	document.getElementById("footer").style.height= "500px";
	document.getElementById("footerbuttondown").style.visibility="visible";  
 document.getElementById("footerbuttonup").style.visibility="hidden";  
	document.getElementById("footercont").style.opacity="1";  
	document.getElementById("footercont").style.visibility="visible";

																								
}
}

</script>
	

</body>

</html>
